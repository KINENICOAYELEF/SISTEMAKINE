<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan de Tratamiento - Sistema Kinesiológico</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/treatment.css">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar del dashboard (se incluirá desde dashboard.js) -->
            <div id="sidebar-container"></div>
            
            <!-- Contenido principal -->
            <div class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <h1><i class="fas fa-clipboard-list"></i> Plan de Tratamiento</h1>
                    <div class="btn-toolbar mb-2 mb-md-0" id="patientInfoBanner">
                        <!-- Información del paciente seleccionado se mostrará aquí -->
                    </div>
                </div>

                <div class="alert alert-info" id="noPatientSelected">
                    <i class="fas fa-info-circle"></i> Seleccione un paciente para crear o editar un plan de tratamiento.
                </div>

                <div id="treatmentPlanContainer" class="d-none">
                    <ul class="nav nav-tabs" id="treatmentTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="smart-tab" data-bs-toggle="tab" data-bs-target="#smart" type="button" role="tab" aria-controls="smart" aria-selected="true">Objetivos SMART</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="exercises-tab" data-bs-toggle="tab" data-bs-target="#exercises" type="button" role="tab" aria-controls="exercises" aria-selected="false">Ejercicios</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="sessions-tab" data-bs-toggle="tab" data-bs-target="#sessions" type="button" role="tab" aria-controls="sessions" aria-selected="false">Sesiones</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="timeline-tab" data-bs-toggle="tab" data-bs-target="#timeline" type="button" role="tab" aria-controls="timeline" aria-selected="false">Línea de Tiempo</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="recommendations-tab" data-bs-toggle="tab" data-bs-target="#recommendations" type="button" role="tab" aria-controls="recommendations" aria-selected="false">Recomendaciones</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="summary-tab" data-bs-toggle="tab" data-bs-target="#summary" type="button" role="tab" aria-controls="summary" aria-selected="false">Resumen</button>
                        </li>
                    </ul>
                    <div class="tab-content pt-3" id="treatmentTabContent">
                        <!-- Tab: Objetivos SMART -->
                        <div class="tab-pane fade show active" id="smart" role="tabpanel" aria-labelledby="smart-tab">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">Objetivos SMART</h5>
                                    <button class="btn btn-sm btn-primary" id="addSmartObjectiveBtn">
                                        <i class="fas fa-plus"></i> Agregar Objetivo
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="alert alert-secondary">
                                        <h6>SMART = Específico, Medible, Alcanzable, Relevante, Temporal</h6>
                                        <p>Define objetivos claros y medibles para el plan de tratamiento del paciente.</p>
                                    </div>
                                    <div id="smartObjectivesList" class="mt-3">
                                        <!-- Aquí se listarán los objetivos SMART -->
                                    </div>
                                    
                                    <!-- Modal para agregar/editar objetivo SMART -->
                                    <div class="modal fade" id="smartObjectiveModal" tabindex="-1" aria-labelledby="smartObjectiveModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-lg">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="smartObjectiveModalLabel">Agregar Objetivo SMART</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <form id="smartObjectiveForm">
                                                        <input type="hidden" id="objectiveId">
                                                        <div class="mb-3">
                                                            <label for="objectiveTitle" class="form-label">Título del Objetivo</label>
                                                            <input type="text" class="form-control" id="objectiveTitle" required>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="objectivePriority" class="form-label">Prioridad</label>
                                                            <select class="form-select" id="objectivePriority" required>
                                                                <option value="">Seleccione prioridad</option>
                                                                <option value="Alta">Alta</option>
                                                                <option value="Media">Media</option>
                                                                <option value="Baja">Baja</option>
                                                            </select>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6 mb-3">
                                                                <label for="objectiveSpecific" class="form-label">Específico</label>
                                                                <textarea class="form-control" id="objectiveSpecific" rows="3" placeholder="¿Qué quieres lograr exactamente?" required></textarea>
                                                            </div>
                                                            <div class="col-md-6 mb-3">
                                                                <label for="objectiveMeasurable" class="form-label">Medible</label>
                                                                <textarea class="form-control" id="objectiveMeasurable" rows="3" placeholder="¿Cómo medirás el progreso y éxito?" required></textarea>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6 mb-3">
                                                                <label for="objectiveAchievable" class="form-label">Alcanzable</label>
                                                                <textarea class="form-control" id="objectiveAchievable" rows="3" placeholder="¿Es realista según la condición del paciente?" required></textarea>
                                                            </div>
                                                            <div class="col-md-6 mb-3">
                                                                <label for="objectiveRelevant" class="form-label">Relevante</label>
                                                                <textarea class="form-control" id="objectiveRelevant" rows="3" placeholder="¿Por qué es importante para el paciente?" required></textarea>
                                                            </div>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-6 mb-3">
                                                                <label for="objectiveTimebound" class="form-label">Temporal</label>
                                                                <div class="input-group">
                                                                    <input type="number" class="form-control" id="objectiveTimeValue" min="1" required>
                                                                    <select class="form-select" id="objectiveTimeUnit" required>
                                                                        <option value="dias">días</option>
                                                                        <option value="semanas">semanas</option>
                                                                        <option value="meses">meses</option>
                                                                    </select>
                                                                </div>
                                                            </div>
                                                            <div class="col-md-6 mb-3">
                                                                <label for="objectiveExpectedDate" class="form-label">Fecha estimada de cumplimiento</label>
                                                                <input type="date" class="form-control" id="objectiveExpectedDate" required>
                                                            </div>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="objectiveCategory" class="form-label">Categoría</label>
                                                            <select class="form-select" id="objectiveCategory" required>
                                                                <option value="">Seleccione categoría</option>
                                                                <option value="Funcional">Funcional</option>
                                                                <option value="Movilidad">Movilidad</option>
                                                                <option value="Fuerza">Fuerza</option>
                                                                <option value="Dolor">Dolor</option>
                                                                <option value="AVD">Actividades de Vida Diaria</option>
                                                                <option value="Deporte">Deporte</option>
                                                                <option value="Laboral">Laboral</option>
                                                                <option value="Otro">Otro</option>
                                                            </select>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="objectiveNotes" class="form-label">Notas adicionales</label>
                                                            <textarea class="form-control" id="objectiveNotes" rows="2"></textarea>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                                    <button type="button" class="btn btn-primary" id="saveSmartObjectiveBtn">Guardar</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tab: Ejercicios Terapéuticos -->
                        <div class="tab-pane fade" id="exercises" role="tabpanel" aria-labelledby="exercises-tab">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">Ejercicios Terapéuticos</h5>
                                    <button class="btn btn-sm btn-primary" id="addExerciseBtn">
                                        <i class="fas fa-plus"></i> Agregar Ejercicio
                                    </button>
                                </div>
                                <div class="card-body">
                                    <ul class="nav nav-pills mb-3" id="exerciseCategoryTabs" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" id="strength-tab" data-bs-toggle="pill" data-bs-target="#strength" type="button" role="tab" aria-controls="strength" aria-selected="true">Fuerza</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="flexibility-tab" data-bs-toggle="pill" data-bs-target="#flexibility" type="button" role="tab" aria-controls="flexibility" aria-selected="false">Flexibilidad</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="proprioception-tab" data-bs-toggle="pill" data-bs-target="#proprioception" type="button" role="tab" aria-controls="proprioception" aria-selected="false">Propiocepción</button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="functional-tab" data-bs-toggle="pill" data-bs-target="#functional" type="button" role="tab" aria-controls="functional" aria-selected="false">Funcionales</button>
                                        </li>
                                    </ul>
                                    <div class="tab-content" id="exerciseCategoryContent">
                                        <div class="tab-pane fade show active" id="strength" role="tabpanel" aria-labelledby="strength-tab">
                                            <div id="strengthExercisesList" class="exercise-list">
                                                <!-- Ejercicios de fuerza se listarán aquí -->
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="flexibility" role="tabpanel" aria-labelledby="flexibility-tab">
                                            <div id="flexibilityExercisesList" class="exercise-list">
                                                <!-- Ejercicios de flexibilidad se listarán aquí -->
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="proprioception" role="tabpanel" aria-labelledby="proprioception-tab">
                                            <div id="proprioceptionExercisesList" class="exercise-list">
                                                <!-- Ejercicios de propiocepción se listarán aquí -->
                                            </div>
                                        </div>
                                        <div class="tab-pane fade" id="functional" role="tabpanel" aria-labelledby="functional-tab">
                                            <div id="functionalExercisesList" class="exercise-list">
                                                <!-- Ejercicios funcionales se listarán aquí -->
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Modal para agregar/editar ejercicio -->
                                    <div class="modal fade" id="exerciseModal" tabindex="-1" aria-labelledby="exerciseModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-lg">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="exerciseModalLabel">Agregar Ejercicio</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <form id="exerciseForm">
                                                        <input type="hidden" id="exerciseId">
                                                        <div class="row">
                                                            <div class="col-md-6 mb-3">
                                                                <label for="exerciseName" class="form-label">Nombre del Ejercicio</label>
                                                                <input type="text" class="form-control" id="exerciseName" required>
                                                            </div>
                                                            <div class="col-md-6 mb-3">
                                                                <label for="exerciseCategory" class="form-label">Categoría</label>
                                                                <select class="form-select" id="exerciseCategory" required>
                                                                    <option value="">Seleccione categoría</option>
                                                                    <option value="strength">Fuerza</option>
                                                                    <option value="flexibility">Flexibilidad</option>
                                                                    <option value="proprioception">Propiocepción</option>
                                                                    <option value="functional">Funcional</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="exerciseDescription" class="form-label">Descripción</label>
                                                            <textarea class="form-control" id="exerciseDescription" rows="3" required></textarea>
                                                        </div>
                                                        <div class="row">
                                                            <div class="col-md-3 mb-3">
                                                                <label for="exerciseSets" class="form-label">Series</label>
                                                                <input type="number" class="form-control" id="exerciseSets" min="1" max="20" required>
                                                            </div>
                                                            <div class="col-md-3 mb-3">
                                                                <label for="exerciseReps" class="form-label">Repeticiones</label>
                                                                <input type="number" class="form-control" id="exerciseReps" min="1" max="100" required>
                                                            </div>
                                                            <div class="col-md-3 mb-3">
                                                                <label for="exerciseFrequency" class="form-label">Frecuencia</label>
                                                                <select class="form-select" id="exerciseFrequency" required>
                                                                    <option value="">Seleccione</option>
                                                                    <option value="Diario">Diario</option>
                                                                    <option value="Día por medio">Día por medio</option>
                                                                    <option value="2 veces por semana">2 veces por semana</option>
                                                                    <option value="3 veces por semana">3 veces por semana</option>
                                                                    <option value="Semanal">Semanal</option>
                                                                </select>
                                                            </div>
                                                            <div class="col-md-3 mb-3">
                                                                <label for="exerciseIntensity" class="form-label">Intensidad</label>
                                                                <select class="form-select" id="exerciseIntensity" required>
                                                                    <option value="">Seleccione</option>
                                                                    <option value="Baja">Baja</option>
                                                                    <option value="Media">Media</option>
                                                                    <option value="Alta">Alta</option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="exerciseProgressionPlan" class="form-label">Plan de Progresión</label>
                                                            <textarea class="form-control" id="exerciseProgressionPlan" rows="2" placeholder="Describir cómo se progresará el ejercicio"></textarea>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="exerciseContraindications" class="form-label">Contraindicaciones o Precauciones</label>
                                                            <textarea class="form-control" id="exerciseContraindications" rows="2"></textarea>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="exerciseObjectiveLink" class="form-label">Objetivo SMART Relacionado</label>
                                                            <select class="form-select" id="exerciseObjectiveLink">
                                                                <option value="">Ninguno</option>
                                                                <!-- Las opciones se cargarán dinámicamente -->
                                                            </select>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                                    <button type="button" class="btn btn-primary" id="saveExerciseBtn">Guardar</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tab: Planificación de Sesiones -->
                        <div class="tab-pane fade" id="sessions" role="tabpanel" aria-labelledby="sessions-tab">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">Planificación de Sesiones</h5>
                                    <button class="btn btn-sm btn-primary" id="addSessionBtn">
                                        <i class="fas fa-plus"></i> Agregar Sesión
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="mb-3">
                                                <label for="treatmentFrequency" class="form-label">Frecuencia de Tratamiento</label>
                                                <select class="form-select" id="treatmentFrequency">
                                                    <option value="">Seleccione frecuencia</option>
                                                    <option value="Diario">Diario</option>
                                                    <option value="3 veces por semana">3 veces por semana</option>
                                                    <option value="2 veces por semana">2 veces por semana</option>
                                                    <option value="Semanal">Semanal</option>
                                                    <option value="Quincenal">Quincenal</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="mb-3">
                                                <label for="estimatedSessions" class="form-label">Número Estimado de Sesiones</label>
                                                <input type="number" class="form-control" id="estimatedSessions" min="1" max="100">
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="mb-3">
                                                <label for="sessionDuration" class="form-label">Duración de Sesión (minutos)</label>
                                                <input type="number" class="form-control" id="sessionDuration" min="15" max="120" step="5">
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div id="sessionsCalendar" class="calendar-container mt-4">
                                        <!-- Aquí se mostrará el calendario de sesiones -->
                                    </div>
                                    
                                    <h6 class="mt-4 mb-3">Sesiones Planificadas</h6>
                                    <div id="sessionsList" class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Fecha</th>
                                                    <th>Nº</th>
                                                    <th>Objetivo</th>
                                                    <th>Técnicas</th>
                                                    <th>Acciones</th>
                                                </tr>
                                            </thead>
                                            <tbody id="sessionsTableBody">
                                                <!-- Aquí se listarán las sesiones planificadas -->
                                            </tbody>
                                        </table>
                                    </div>
                                    
                                    <!-- Modal para agregar/editar sesión -->
                                    <div class="modal fade" id="sessionModal" tabindex="-1" aria-labelledby="sessionModalLabel" aria-hidden="true">
                                        <div class="modal-dialog modal-lg">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="sessionModalLabel">Agregar Sesión</h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <form id="sessionForm">
                                                        <input type="hidden" id="sessionId">
                                                        <div class="row">
                                                            <div class="col-md-6 mb-3">
                                                                <label for="sessionDate" class="form-label">Fecha</label>
                                                                <input type="date" class="form-control" id="sessionDate" required>
                                                            </div>
                                                            <div class="col-md-6 mb-3">
                                                                <label for="sessionNumber" class="form-label">Número de Sesión</label>
                                                                <input type="number" class="form-control" id="sessionNumber" min="1" required>
                                                            </div>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="sessionObjective" class="form-label">Objetivo de la Sesión</label>
                                                            <input type="text" class="form-control" id="sessionObjective" required>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="sessionTechniques" class="form-label">Técnicas a Aplicar</label>
                                                            <textarea class="form-control" id="sessionTechniques" rows="3" required></textarea>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label class="form-label">Ejercicios Incluidos</label>
                                                            <div id="sessionExercisesList" class="border p-3 rounded">
                                                                <!-- Checkboxes de ejercicios se cargarán dinámicamente -->
                                                            </div>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="sessionNotes" class="form-label">Notas Adicionales</label>
                                                            <textarea class="form-control" id="sessionNotes" rows="2"></textarea>
                                                        </div>
                                                    </form>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                                                    <button type="button" class="btn btn-primary" id="saveSessionBtn">Guardar</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tab: Línea de Tiempo -->
                        <div class="tab-pane fade" id="timeline" role="tabpanel" aria-labelledby="timeline-tab">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Línea de Tiempo del Tratamiento</h5>
                                </div>
                                <div class="card-body">
                                    <div class="timeline-controls mb-3">
                                        <button class="btn btn-sm btn-outline-primary" id="timelineZoomOut">
                                            <i class="fas fa-search-minus"></i> Alejar
                                        </button>
                                        <button class="btn btn-sm btn-outline-primary ms-2" id="timelineZoomIn">
                                            <i class="fas fa-search-plus"></i> Acercar
                                        </button>
                                        <button class="btn btn-sm btn-outline-secondary ms-2" id="timelineExport">
                                            <i class="fas fa-download"></i> Exportar
                                        </button>
                                    </div>
                                    
                                    <div id="treatmentTimeline" class="timeline-container">
                                        <!-- Aquí se mostrará la línea de tiempo -->
                                    </div>
                                    
                                    <div class="timeline-legend mt-3">
                                        <div class="d-flex flex-wrap">
                                            <div class="me-3 mb-2">
                                                <span class="badge bg-primary">●</span> Sesiones
                                            </div>
                                            <div class="me-3 mb-2">
                                                <span class="badge bg-success">●</span> Objetivos SMART
                                            </div>
                                            <div class="me-3 mb-2">
                                                <span class="badge bg-info">●</span> Evaluaciones
                                            </div>
                                            <div class="me-3 mb-2">
                                                <span class="badge bg-warning">●</span> Progresiones
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tab: Recomendaciones Basadas en Evidencia -->
                        <div class="tab-pane fade" id="recommendations" role="tabpanel" aria-labelledby="recommendations-tab">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Recomendaciones Basadas en Evidencia</h5>
                                </div>
                                <div class="card-body">
                                    <div class="alert alert-info">
                                        <i class="fas fa-info-circle"></i> Las recomendaciones se generan automáticamente a partir del diagnóstico y evaluación del paciente.
                                    </div>
                                    
                                    <div id="recommendationsList" class="mt-3">
                                        <!-- Aquí se mostrarán las recomendaciones basadas en evidencia -->
                                    </div>
                                    
                                    <div class="card mt-4">
                                        <div class="card-header bg-light">
                                            <h6 class="mb-0">Agregar Recomendación Personalizada</h6>
                                        </div>
                                        <div class="card-body">
                                            <form id="customRecommendationForm">
                                                <div class="mb-3">
                                                    <label for="customRecommendationTitle" class="form-label">Título</label>
                                                    <input type="text" class="form-control" id="customRecommendationTitle" required>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="customRecommendationDescription" class="form-label">Descripción</label>
                                                    <textarea class="form-control" id="customRecommendationDescription" rows="3" required></textarea>
                                                </div>
                                                <div class="row">
                                                    <div class="col-md-6 mb-3">
                                                        <label for="customRecommendationEvidence" class="form-label">Nivel de Evidencia</label>
                                                        <select class="form-select" id="customRecommendationEvidence" required>
                                                            <option value="">Seleccione nivel</option>
                                                            <option value="Alta">Alta</option>
                                                            <option value="Moderada">Moderada</option>
                                                            <option value="Baja">Baja</option>
                                                            <option value="Consenso Experto">Consenso de Expertos</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-md-6 mb-3">
                                                        <label for="customRecommendationReference" class="form-label">Referencia (opcional)</label>
                                                        <input type="text" class="form-control" id="customRecommendationReference">
                                                    </div>
                                                </div>
                                                <button type="submit" class="btn btn-primary">Agregar Recomendación</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tab: Resumen del Plan -->
                        <div class="tab-pane fade" id="summary" role="tabpanel" aria-labelledby="summary-tab">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">Resumen del Plan de Tratamiento</h5>
                                    <button class="btn btn-sm btn-primary" id="exportTreatmentPlanBtn">
                                        <i class="fas fa-file-pdf"></i> Exportar PDF
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div id="treatmentPlanSummary">
                                        <!-- Aquí se mostrará el resumen del plan de tratamiento -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts comunes -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.0.1/chart.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- Firebase Scripts -->
    <script type="module" src="../js/firebase-config.js"></script>
    <script type="module" src="../js/treatment.js"></script>
</body>
</html>
